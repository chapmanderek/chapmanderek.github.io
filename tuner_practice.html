<!DOCTYPE html>
<html lang="en">

<head>    
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
</head>

<html>
<body>
    <h1>
        <span id="note">---</span>
    </h1>

    <bold>
        <input type="checkbox" id="A" name="A">
        <label for="A">A</label>
        <br>
        <input type="checkbox" id="b" name="b">
        <label for="b">b</label>
        <br>
        <input type="checkbox" id="c" name="c">
        <label for="c">c</label>
        <br>
        <input type="checkbox" id="d" name="d">
        <label for="d">d</label>
        <br>
        <input type="checkbox" id="e" name="e">
        <label for="e">e</label>
        <br>
        <input type="checkbox" id="f" name="f">
        <label for="f">f</label>
        <br>
        <input type="checkbox" id="B" name="B">
        <label for="B">B</label>
        <br>
        <input type="checkbox" id="C" name="C">
        <label for="C">C</label>
        <br>
        <input type="checkbox" id="g" name="g">
        <label for="g">g</label>
        <br>
        <input type="checkbox" id="D" name="D">
        <label for="D">D</label>
        <br>

        <button id="check_all" onclick="check_all()">Check All</button><br>
        <button id="clear_all" onclick="clear_all()">Clear All</button><br>
        <button id="set_notes" onclick="set_notes()">Refresh</button><br>
        <button id="status_button" onclick="change_status()">Stop</button>

    </body>
</body>

<script>
    var possible_notes = ['A','b','c','d','e','f','B','C','g','D'];
    var notes = []
    var num_notes = 0;
    var interval = setInterval(showletter, 1000);
    var running = true;

    function set_notes(){
        let tmp_letters = [];
        console.log('in set notes')

        for (let i = 0; i < possible_notes.length; i++){
            console.log(i)
            console.log(possible_notes[i]);
            if (document.getElementById(possible_notes[i]).checked)
            {
                console.log('letter checked');
                tmp_letters.push(possible_notes[i]);
            }
        }

        console.log(tmp_letters);
        notes = tmp_letters;
        num_notes = notes.length;
    }

    function clear_all(){
        for (let i = 0; i < possible_notes.length; i++){
            document.getElementById(possible_notes[i]).checked = false;
        }
        set_notes();  //avoid need to click refresh do automatically
    }

    function check_all(){
        for (let i = 0; i < possible_notes.length; i++){
            document.getElementById(possible_notes[i]).checked = true;
        }
        set_notes();  //avoid need to click refresh do automatically
    }

    function showletter(){
        num_notes = notes.length;
        
        if (num_notes == 0){
            output = "---";
            }
        else{
            let choice = Math.floor(Math.random() * num_notes);
            output = notes[choice];
        }
        document.getElementById("note").innerHTML = output;
    }

    function change_status(){
        if (running == true){
            clearInterval(interval);
            console.log("stopping");
            document.getElementById("status_button").textContent = "Start";
            running = false;
        }
        else{
            console.log('starting')
            interval = setInterval(showletter, 1000);
            document.getElementById("status_button").textContent = "Stop";
            running = true;
        }
    }

</script>
</html>